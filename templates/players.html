{% extends 'layout.html' %}

{% block title %}Oyuncular{% endblock %}

{% block content %}
<div class="container">
    <div class="header">
        <h1>üèÜ Futbol Oyuncularƒ±</h1>
        <p>D√ºnya futbolundaki t√ºm oyuncularƒ±n detaylƒ± bilgileri</p>
    </div>

    <div class="search-bar">
        <input type="text" id="searchInput" placeholder="Oyuncu ara...">
    </div>

    <div id="playersContainer" class="players-table-wrapper">
        {% if players %}
        <table class="players-table">
            <thead>
                <tr>
                    <th>Oyuncu</th>
                    <th>Doƒüum Tarihi</th>
                    <th>Ayak</th>
                    <th>Boy</th>
                    <th>Pozisyon</th>
                    <th>Uyruk</th>
                    <th>Kul√ºp</th>
                </tr>
            </thead>
            <tbody>
                {% for player in players %}
                <tr class="player-row fade-in" data-player-name="{{ player.name|default('bilinmeyen')|lower }}">
                    <td class="player-name-cell">
                        <div class="player-mini-avatar">
                            {{ player.name[0]|upper if player.name else '‚öΩ' }}
                        </div>
                        <div class="player-name-text">{{ player.name or 'Bilinmeyen Oyuncu' }}</div>
                    </td>
                    <td>{{ player.date_of_birth or 'N/A' }}</td>
                    <td>{{ player.foot|title or 'N/A' }}</td>
                    <td>
                        {% if player.height_in_cm %}
                            {{ player.height_in_cm }} cm
                        {% else %}
                            N/A
                        {% endif %}
                    </td>
                    <td>{{ player.sub_position or 'N/A' }}</td>
                    <td>{{ player.country_of_citizenship or 'N/A' }}</td>
                    <td>{{ player.club_name or 'Kul√ºps√ºz' }}</td>
                </tr>
                {% endfor %}
                <tr id="noResultsRow" class="no-results-row" style="display: none;">
                    <td colspan="7">Arama kriterine uyan oyuncu bulunamadƒ±.</td>
                </tr>
            </tbody>
        </table>
        {% else %}
            <div class="no-results">
                <p>Hen√ºz oyuncu verisi bulunmamaktadƒ±r.</p>
            </div>
        {% endif %}
    </div>
</div>

<script>
const searchInput = document.getElementById('searchInput');
const playerRows = document.querySelectorAll('.player-row');
const noResultsRow = document.getElementById('noResultsRow');
searchInput.addEventListener('input', function(e) {
    const searchTerm = e.target.value.toLowerCase().trim();
    let visibleCount = 0;
    playerRows.forEach(row => {
        const playerName = row.getAttribute('data-player-name');
        const isVisible = playerName.includes(searchTerm);
        row.style.display = isVisible ? '' : 'none';
        if (isVisible) visibleCount += 1;
    });
    if (noResultsRow) {
        noResultsRow.style.display = visibleCount === 0 ? '' : 'none';
    }
});
</script>
{% endblock %}
