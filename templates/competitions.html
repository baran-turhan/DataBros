{% extends 'layout.html' %}

{% block title %}Leagues{% endblock %}

{% block extra_head %}
<style>
    .filter-bar {
        max-width: 600px;
        margin: 0 auto 30px;
        display: flex;
        gap: 12px;
        align-items: center;
        justify-content: center;
        background: rgba(255,255,255,0.1);
        padding: 14px 18px;
        border-radius: 16px;
        backdrop-filter: blur(8px);
    }

    .filter-bar label {
        color: #fff;
        font-weight: 600;
        letter-spacing: 0.5px;
    }

    .filter-bar select {
        padding: 12px 16px;
        border-radius: 12px;
        border: none;
        min-width: 160px;
        font-size: 1rem;
        outline: none;
    }

    .filter-bar button {
        padding: 12px 18px;
        border-radius: 12px;
        border: none;
        background: linear-gradient(135deg, #1e3c72, #2a5298);
        color: #fff;
        font-weight: 700;
        cursor: pointer;
        transition: transform 0.15s ease, box-shadow 0.15s ease;
    }

    .filter-bar button:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 20px rgba(30, 60, 114, 0.35);
    }

    .info-banner {
        text-align: center;
        color: white;
        font-size: 1.1rem;
        padding: 20px;
        background: rgba(255,255,255,0.12);
        border-radius: 16px;
        margin: 0 auto;
        max-width: 640px;
    }

    @media (max-width: 768px) {
        .filter-bar {
            flex-direction: column;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="container">
    <div class="header">
        <h1>üèÜ Leagues</h1>
        <p>All leagues, cups and special tournaments in world football</p>
    </div>

    <form method="get" class="filter-bar">
        <label for="country">Country</label>
        <select id="country" name="country" required>
            <option value="" disabled {% if not selected_country %}selected{% endif %}>Select country</option>
            {% for country in countries %}
                <option value="{{ country }}" {% if country == selected_country %}selected{% endif %}>{{ country }}</option>
            {% endfor %}
        </select>
        <label for="is_major_league">Major League</label>
        <select id="is_major_league" name="is_major_league">
            <option value="" {% if not selected_is_major_league %}selected{% endif %}>All</option>
            <option value="true" {% if selected_is_major_league == "true" %}selected{% endif %}>Yes</option>
            <option value="false" {% if selected_is_major_league == "false" %}selected{% endif %}>No</option>
        </select>
        <button type="submit">Apply</button>
    </form>

    {% if selected_country %}
        {% if competitions %}
            <div id="competitionsContainer" class="players-grid">
                {% for comp in competitions %}
                <div class="player-card fade-in">
                    <!-- Avatar + Title -->
                    <div class="player-header">
                        <div class="player-avatar">
                            {{ comp.name[0]|upper if comp.name else 'üèÜ' }}
                        </div>
                        <h2 class="player-name">
                            {{ comp.name or 'Unknown League' }}
                        </h2>
                    </div>

                    <!-- Info Section -->
                    <div class="player-info">
                        <div class="info-item">
                            <span class="info-label">üåç Country</span>
                            <span class="info-value">{{ comp.country_name or 'N/A' }}</span>
                        </div>

                        <div class="info-item">
                            <span class="info-label">üè∑Ô∏è League ID</span>
                            <span class="info-value">{{ comp.competition_id or 'N/A' }}</span>
                        </div>

                        <div class="info-item">
                            <span class="info-label">üìå Major League?</span>
                            <span class="info-value">
                                {% if comp.is_major_league %}
                                    <span class="value-highlight">Yes</span>
                                {% else %}
                                    No
                                {% endif %}
                            </span>
                        </div>

                        <div class="info-item">
                            <span class="info-label">üîó URL</span>
                            <span class="info-value">
                                {% if comp.url %}
                                    <a href="{{ comp.url }}" target="_blank" style="color:#2a5298; font-weight:700;">
                                        Visit
                                    </a>
                                {% else %}
                                    N/A
                                {% endif %}
                            </span>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        {% else %}
            <div class="no-results">No leagues found for the selected country.</div>
        {% endif %}
    {% else %}
        <div class="info-banner">Select a country and click 'Apply' to list that country's leagues.</div>
    {% endif %}
</div>
{% endblock %}
